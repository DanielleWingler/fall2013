<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Grant's Extra-Credit Excercises</title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/fall2013/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/fall2013/css/main.css">

    </head>
    <body>
        <!-- Ribbon -->
        <a href="https://github.com/silshack/fall2013"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
        
        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/fall2013/">The SILShack class blog - Fall 2013</a></h1>
              <p>
              <a class="extra" href="/fall2013/syllabus.html">syllabus</a>
              <a class="extra" href="/fall2013/schedule.html">schedule</a>
              <a class="extra" href="/fall2013/assignments.html">assignments</a>
              <a class="extra" href="/fall2013/people.html">people</a>
              <a class="extra" href="/fall2013/feedback.html">feedback</a>
              <a class="extra" href="/fall2013/music.html">music</a>
              </p>
            </div>

                <h2>Grant's Extra-Credit Excercises</h2>

<p>
by 


    
        
		
        	Grant McLendon
        
    

</p> <!-- /.byline -->

<p class="meta">25 Sep 2013</p>

<div class="post">
<p>So the full code for this thing is rather long and can be found <a href="/fall2013/gerbal/extra1.py">here</a>.</p>

<h2>Excercise 1</h2>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="k">def</span> <span class="nf">excercise1</span><span class="p">(</span><span class="n">book</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    proccess_file() got rather complicated and too sofisticated for this problem</span>
<span class="sd">    So we&#39;re just going to rewrite it here. We could define a new method,</span>
<span class="sd">    but my preference is to only do that if we need to solve the same problem 3 or more times</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
    <span class="n">longstring</span> <span class="o">=</span> <span class="nb">str</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fp</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">():</span> 
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">punctuation</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">whitespace</span><span class="p">)</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;[\W_]+&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span> <span class="c">#regular expressions clean up wierd characters not included in string.punctuation</span>
            <span class="n">longstring</span> <span class="o">=</span> <span class="n">longstring</span> <span class="o">+</span> <span class="n">word</span> <span class="o">+</span> <span class="s">&quot; &quot;</span>
    <span class="k">return</span> <span class="n">longstring</span>
</code></pre></div>
<p>The excercise1 takes the argument of a text file and returns it stripped of all nonalphanumeric characters</p>

<h2>Exercise 2</h2>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="k">def</span> <span class="nf">def</span> <span class="n">exercise2</span><span class="p">(</span><span class="n">book</span><span class="p">):</span>
    <span class="n">hist</span> <span class="o">=</span> <span class="n">process_file</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="s">&quot;There are </span><span class="si">%d</span><span class="s"> unique words in this work&quot;</span> <span class="o">%</span><span class="nb">len</span><span class="p">(</span><span class="n">hist</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">process_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">guten</span><span class="p">):</span>
    <span class="n">hist</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">guten</span><span class="p">:</span>
        <span class="n">header</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">guten</span><span class="p">:</span>
        <span class="n">header</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">line</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;*** END OF THIS PROJ&quot;</span><span class="p">:</span> <span class="c"># There must be a better way to escape the header and footer</span>
            <span class="n">header</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">header</span><span class="p">:</span>
            <span class="n">process_line</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">hist</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">line</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;*END*THE SMALL PRINT&quot;</span> <span class="ow">or</span> <span class="n">line</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span><span class="o">==</span><span class="s">&quot;*** START OF THIS PR&quot;</span><span class="p">:</span> <span class="c">#this is only for the shakespeares folios &quot;00ws110.tt&quot;</span>
            <span class="n">header</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="c">#print &quot;header escaped&quot; #woo, debugging</span>
    <span class="k">return</span> <span class="n">hist</span>

<span class="k">def</span> <span class="nf">process_line</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">hist</span><span class="p">):</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span> <span class="c">#clean hyphenated words</span>

    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">():</span> <span class="c">#re.split(&#39;[\W_]+&#39;, line) #could do the split with regex, but regex is magic and doesn&#39;t strip punctuation quite as nicely</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">punctuation</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">whitespace</span><span class="p">)</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;[\W_]+&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span> <span class="c">#this regular expression should get rid of the few special iso characters not in string.punctuation</span>

        <span class="n">hist</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="n">hist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>
</code></pre></div>
<p>Exercise 2 returns the number of unique words used in a body of text. A cursory examination of a couple of text from different eras suggest modern texts have fewer unique words. This owes mostly to orthographical errors and inconsistency. Though it also does have to do with a contracting vocabulary as older terms fell our of use</p>

<h2>Exercise 3</h2>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="k">def</span> <span class="nf">exercise3</span><span class="p">(</span><span class="n">book</span><span class="p">):</span>
    <span class="n">hist</span> <span class="o">=</span> <span class="n">process_file</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">top_20</span><span class="p">(</span><span class="n">hist</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">output</span>

<span class="k">def</span> <span class="nf">top_20</span><span class="p">(</span><span class="n">hist</span><span class="p">):</span>
    <span class="n">hist_sorted</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">hist</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c">#according to stackexchange this is a really fast way to sort a dicitonary</span>
    <span class="n">output</span> <span class="o">=</span><span class="s">&quot;The twenty most common terms in this work are:</span><span class="se">\n</span><span class="s">&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">hist_sorted</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>
    <span class="k">return</span> <span class="n">output</span>
</code></pre></div>
<p>Exercise 3 returns the 20 most common words in a given book. They are almost always &quot;the&quot; though sometimes Gutenberg makes an appearance if the header and footer ignore mechanism malfunctions.</p>

<h2>Exercise 4</h2>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="k">def</span> <span class="nf">exercise4</span><span class="p">(</span><span class="n">book</span><span class="p">):</span>
    <span class="n">output_list</span> <span class="o">=</span> <span class="n">return_true_words</span><span class="p">(</span><span class="n">compare_lists</span><span class="p">(</span><span class="n">process_file</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span> <span class="n">process_file</span><span class="p">(</span><span class="s">&quot;words.txt&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">output_list</span> <span class="c">#long </span>
<span class="k">def</span> <span class="nf">compare_lists</span><span class="p">(</span><span class="n">list1</span><span class="p">,</span> <span class="n">list2</span><span class="p">):</span>
    <span class="n">new_list</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">word1</span> <span class="ow">in</span> <span class="n">list1</span><span class="p">:</span>
        <span class="n">new_list</span><span class="p">[</span><span class="n">word1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="c">#print word1</span>
        <span class="k">if</span> <span class="n">list2</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">word1</span><span class="p">):</span>
            <span class="n">new_list</span><span class="p">[</span><span class="n">word1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="n">new_list</span>
</code></pre></div>
<p>Exercise 4 takes two lists of words, a book and a list of common words, compares them and returns the words present in the book not present in the list of common words.  Most of the returned words for newer texts (post ~1820ish) are proper nouns or specialized vocabulary. For older text orthography and vocabulary vary so widely that many more words are returned. Shakespeare and works of that same age often have more words excluded than included in the list of common words. </p>

<p>And Finally I wrote the following method to call all of the excercise() methods because I was too lazy to type out &#39;excerciseN()&#39; four times</p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="k">def</span> <span class="nf">writeitallout</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&quot;execise</span><span class="si">%d</span><span class="s">.txt&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">)</span>
        <span class="n">method_name</span> <span class="o">=</span> <span class="s">&quot;exercise</span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">i</span> <span class="c">#because writing four method names is hard</span>

        <span class="n">outtext</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">method_name</span><span class="p">)</span> <span class="c">#eval() evaluates a string as python code</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        eval() is kind of dangerous and has the potential to make it much easier</span>
<span class="sd">        to excecute malicious, obfuscated code, but it works in this case.</span>
<span class="sd">        I suppose this makes this bad code. The other methods I tried to solve this</span>
<span class="sd">        problem did not work nearly as well.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">print</span> <span class="s">&quot;Writing exercise </span><span class="si">%d</span><span class="s"> to file exercise</span><span class="si">%d</span><span class="s">.txt&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
        <span class="n">output</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">outtext</span><span class="p">(</span><span class="s">&#39;pg43791.txt&#39;</span><span class="p">)))</span>
        <span class="n">output</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</code></pre></div>
<p>As I note in the comments, eval() is a particularly dangerous method and according to the kind folks on StackExchange a mark of poor programming. It does pose serious security concerns as it does allow potentially malicious code to be generated in an obfuscated way. </p>

</div>

<div class="end">
	
		
	Grant's a first year MSIS student. Find <strong>Grant McLendon</strong> on <a href="http://twitter.com/gerbal100">Twitter</a>, <a href="http://github.com/gerbal">Github</a>, and <a href="http://gerbal.org">on the web</a>. <br />

	
	
</div>

<div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'silshack'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    


            <div class="footer">
              <div class="contact">
                <p>
                  INLS 560 - "Programming for Information Professionals"
                </p>
                <p>
                  Another <a href="http://github.com/silshack/professorjekyll">silshack</a> by  <a href="http://twitter.com/hauspoor/">@hauspoor</a> & friends<br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
    <!-- Google Analytics -->
    <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            
     ga('create', 'UA-20109396-6', 'silshack.github.io');
     ga('send', 'pageview');           
    </script>
</html>
