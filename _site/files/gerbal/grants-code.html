<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title></title>
        <meta name="viewport" content="width=device-width">

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="/fall2013/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="/fall2013/css/main.css">

    </head>
    <body>
        <!-- Ribbon -->
        <a href="https://github.com/silshack/fall2013"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
        
        <div class="container">
          <div class="site">
            <div class="header">
              <h1 class="title"><a href="/fall2013/">The SILShack class blog - Fall 2013</a></h1>
              <p>
              <a class="extra" href="/fall2013/syllabus.html">syllabus</a>
              <a class="extra" href="/fall2013/schedule.html">schedule</a>
              <a class="extra" href="/fall2013/assignments.html">assignments</a>
              <a class="extra" href="/fall2013/people.html">people</a>
              <a class="extra" href="/fall2013/feedback.html">feedback</a>
              <a class="extra" href="/fall2013/music.html">music</a>
              </p>
            </div>

                <p>Find the file <a href="/fall2013/files/extra1.py">here</a></p>
<div class="highlight"><pre><code class="python language-python" data-lang="python"><span class="kn">import</span> <span class="nn">re</span><span class="o">,</span><span class="nn">string</span><span class="o">,</span><span class="nn">operator</span><span class="o">,</span><span class="nn">os</span>

<span class="k">def</span> <span class="nf">process_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">guten</span><span class="p">):</span>
    <span class="n">hist</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">guten</span><span class="p">:</span>
        <span class="n">header</span> <span class="o">=</span> <span class="bp">True</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">guten</span><span class="p">:</span>
        <span class="n">header</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fp</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">line</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;*** END OF THIS PROJ&quot;</span><span class="p">:</span> <span class="c"># There must be a better way to escape the header and footer</span>
            <span class="n">header</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">header</span><span class="p">:</span>
            <span class="n">process_line</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">hist</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">line</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span> <span class="o">==</span> <span class="s">&quot;*END*THE SMALL PRINT&quot;</span> <span class="ow">or</span> <span class="n">line</span><span class="p">[:</span><span class="mi">20</span><span class="p">]</span><span class="o">==</span><span class="s">&quot;*** START OF THIS PR&quot;</span><span class="p">:</span> <span class="c">#this is only for the shakespeares folios &quot;00ws110.tt&quot;</span>
            <span class="n">header</span> <span class="o">=</span> <span class="bp">False</span>
            <span class="c">#print &quot;header escaped&quot; #woo, debugging</span>
    <span class="k">return</span> <span class="n">hist</span>

<span class="k">def</span> <span class="nf">process_line</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">hist</span><span class="p">):</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span> <span class="c">#clean hyphenated words</span>

    <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">():</span> <span class="c">#re.split(&#39;[\W_]+&#39;, line) #could do the split with regex, but regex is magic and doesn&#39;t strip punctuation quite as nicely</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">punctuation</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">whitespace</span><span class="p">)</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;[\W_]+&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span> <span class="c">#this regular expression should get rid of the few special iso characters not in string.punctuation</span>

        <span class="n">hist</span><span class="p">[</span><span class="n">word</span><span class="p">]</span> <span class="o">=</span> <span class="n">hist</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span>

<span class="k">def</span> <span class="nf">top_20</span><span class="p">(</span><span class="n">hist</span><span class="p">):</span>
    <span class="n">hist_sorted</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">hist</span><span class="o">.</span><span class="n">iteritems</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="n">operator</span><span class="o">.</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span> <span class="c">#according to stackexchange this is a really fast way to sort a dicitonary</span>
    <span class="n">output</span> <span class="o">=</span><span class="s">&quot;The twenty most common terms in this work are:</span><span class="se">\n</span><span class="s">&quot;</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">20</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">+=</span> <span class="nb">str</span><span class="p">(</span><span class="n">hist_sorted</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span>
    <span class="k">return</span> <span class="n">output</span>

<span class="k">def</span> <span class="nf">compare_lists</span><span class="p">(</span><span class="n">list1</span><span class="p">,</span> <span class="n">list2</span><span class="p">):</span>
    <span class="n">new_list</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">word1</span> <span class="ow">in</span> <span class="n">list1</span><span class="p">:</span>
        <span class="n">new_list</span><span class="p">[</span><span class="n">word1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
        <span class="c">#print word1</span>
        <span class="k">if</span> <span class="n">list2</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="n">word1</span><span class="p">):</span>
            <span class="n">new_list</span><span class="p">[</span><span class="n">word1</span><span class="p">]</span> <span class="o">=</span> <span class="bp">False</span>
    <span class="k">return</span> <span class="n">new_list</span>

<span class="k">def</span> <span class="nf">return_true_words</span><span class="p">(</span><span class="n">dic</span><span class="p">):</span>
    <span class="n">output_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">dic</span><span class="p">:</span>
        <span class="c">#print i</span>
        <span class="k">if</span> <span class="n">dic</span><span class="p">[</span><span class="n">i</span><span class="p">]:</span>
            <span class="n">output_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">output_list</span>

<span class="k">def</span> <span class="nf">exercise1</span><span class="p">(</span><span class="n">book</span><span class="p">):</span>
    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    proccess_file() got rather complicated and too sofisticated for this problem</span>
<span class="sd">    So we&#39;re just going to rewrite it here. We could define a new method,</span>
<span class="sd">    but my preference is to only do that if we need to solve the same problem 3 or more times</span>
<span class="sd">    &#39;&#39;&#39;</span>
    <span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">book</span><span class="p">)</span>
    <span class="n">longstring</span> <span class="o">=</span> <span class="nb">str</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">fp</span><span class="p">:</span>
        <span class="n">line</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&#39;-&#39;</span><span class="p">,</span> <span class="s">&#39; &#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">():</span> 
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">strip</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">punctuation</span> <span class="o">+</span> <span class="n">string</span><span class="o">.</span><span class="n">whitespace</span><span class="p">)</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">&#39;[\W_]+&#39;</span><span class="p">,</span><span class="s">&#39;&#39;</span><span class="p">,</span> <span class="n">word</span><span class="p">)</span> <span class="c">#regular expressions clean up wierd characters not included in string.punctuation</span>
            <span class="n">longstring</span> <span class="o">=</span> <span class="n">longstring</span> <span class="o">+</span> <span class="n">word</span> <span class="o">+</span> <span class="s">&quot; &quot;</span>
    <span class="k">return</span> <span class="n">longstring</span>

<span class="k">def</span> <span class="nf">exercise2</span><span class="p">(</span><span class="n">book</span><span class="p">):</span>
    <span class="n">hist</span> <span class="o">=</span> <span class="n">process_file</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
    <span class="k">return</span> <span class="s">&quot;There are </span><span class="si">%d</span><span class="s"> unique words in this work&quot;</span> <span class="o">%</span><span class="nb">len</span><span class="p">(</span><span class="n">hist</span><span class="p">)</span>

<span class="k">def</span> <span class="nf">exercise3</span><span class="p">(</span><span class="n">book</span><span class="p">):</span>
    <span class="n">hist</span> <span class="o">=</span> <span class="n">process_file</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="bp">True</span><span class="p">)</span>
    <span class="n">output</span> <span class="o">=</span> <span class="n">top_20</span><span class="p">(</span><span class="n">hist</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">output</span>

<span class="k">def</span> <span class="nf">exercise4</span><span class="p">(</span><span class="n">book</span><span class="p">):</span>
    <span class="n">output_list</span> <span class="o">=</span> <span class="n">return_true_words</span><span class="p">(</span><span class="n">compare_lists</span><span class="p">(</span>
        <span class="n">process_file</span><span class="p">(</span><span class="n">book</span><span class="p">,</span> <span class="bp">True</span><span class="p">),</span> <span class="n">process_file</span><span class="p">(</span><span class="s">&quot;words.txt&quot;</span><span class="p">,</span> <span class="bp">False</span><span class="p">)))</span>
    <span class="k">return</span> <span class="n">output_list</span> <span class="c">#long </span>

<span class="k">def</span> <span class="nf">writeitallout</span><span class="p">():</span>
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">):</span>
        <span class="n">output</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&quot;execise</span><span class="si">%d</span><span class="s">.txt&quot;</span> <span class="o">%</span> <span class="n">i</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">)</span>
        <span class="n">method_name</span> <span class="o">=</span> <span class="s">&quot;exercise</span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">i</span> <span class="c">#because writing four method names is hard</span>

        <span class="n">outtext</span> <span class="o">=</span> <span class="nb">eval</span><span class="p">(</span><span class="n">method_name</span><span class="p">)</span> <span class="c">#eval() evaluates a string as python code</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        eval() is kind of dangerous and has the potential to make it much easier</span>
<span class="sd">        to excecute malicious, obfuscated code, but it works in this case.</span>
<span class="sd">        I suppose this makes this bad code. The other methods I tried to solve this</span>
<span class="sd">        problem did not work nearly as well.</span>
<span class="sd">        &#39;&#39;&#39;</span>
        <span class="k">print</span> <span class="s">&quot;Writing exercise </span><span class="si">%d</span><span class="s"> to file exercise</span><span class="si">%d</span><span class="s">.txt&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">i</span><span class="p">)</span>
        <span class="n">output</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">outtext</span><span class="p">(</span><span class="s">&#39;pg43791.txt&#39;</span><span class="p">)))</span>
        <span class="n">output</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

<span class="n">writeitallout</span><span class="p">()</span>
</code></pre></div>

            <div class="footer">
              <div class="contact">
                <p>
                  INLS 560 - "Programming for Information Professionals"
                </p>
                <p>
                  Another <a href="http://github.com/silshack/professorjekyll">silshack</a> by  <a href="http://twitter.com/hauspoor/">@hauspoor</a> & friends<br />
                </p>
              </div>
            </div>
          </div>
        </div> <!-- /container -->

    </body>
    <!-- Google Analytics -->
    <script>
     (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
     (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
     m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
     })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            
     ga('create', 'UA-20109396-6', 'silshack.github.io');
     ga('send', 'pageview');           
    </script>
</html>
